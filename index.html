<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Spicy Library</title>

<script src="https://sdk.minepi.com/pi-sdk.js"></script>

<style>
body{
  background:#111;
  color:#fff;
  font-family:Arial;
  text-align:center;
  padding-top:100px;
}
button{
  padding:14px 30px;
  font-size:16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#ff4500;
  color:white;
}
.hidden{display:none;}
</style>
</head>

<body>

<div id="login">
  <h1>ğŸŒ¶ï¸ Spicy Library</h1>
  <p>Login with Pi Network</p>
  <button id="loginBtn">Login with Pi</button>
</div>

<div id="app" class="hidden">
  <h2 id="welcome"></h2>
  <p>ğŸ“š Welcome to Spicy Library</p>
  <button onclick="logout()">Logout</button>
</div>

<script>
Pi.init({ version:"2.0", sandbox:false });

let authenticated = false;

/* Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ */
document.getElementById("loginBtn").onclick = function(){

  if(authenticated){
    showApp();
    return;
  }

  Pi.authenticate(
    ["username"],
    function(auth){
      authenticated = true;
      window.piUser = auth.user;
      showApp();
    },
    function(err){
      alert("Authentication failed");
      console.error(err);
    }
  );
};

/* Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
function showApp(){
  document.getElementById("login").classList.add("hidden");
  document.getElementById("app").classList.remove("hidden");
  document.getElementById("welcome").innerText =
    "Welcome " + window.piUser.username;
}

/* ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ (Ù…Ø­Ù„ÙŠ ÙÙ‚Ø·) */
function logout(){
  authenticated = false;
  document.getElementById("app").classList.add("hidden");
  document.getElementById("login").classList.remove("hidden");
}
</script>

</body>
</html>
