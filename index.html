<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spicy Library</title>

<!-- Pi SDK -->
<script src="https://sdk.minepi.com/pi-sdk.js"></script>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<style>
body{
  background:#111;
  color:#fff;
  font-family:Arial;
  margin:0;
  padding:20px;
  text-align:center;
}
button{
  padding:10px 20px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background:#ff4500;
  color:white;
  margin:5px;
}
.hidden{display:none;}
.books{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
}
.book{
  background:#1c1c1c;
  border:1px solid #333;
  border-radius:8px;
  padding:15px;
  margin:10px;
  width:220px;
}
.book img{
  width:200px;
}
input,textarea{
  width:90%;
  padding:8px;
  margin:5px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginScreen">
  <h1>üå∂Ô∏è Spicy Library</h1>
  <p>Login with Pi Network</p>
  <button id="loginBtn">Login with Pi</button>
</div>

<!-- APP -->
<div id="appScreen" class="hidden">
  <h2 id="welcome"></h2>

  <button onclick="toggleAddBook()">‚ûï Add Book</button>
  <button onclick="logout()">Logout</button>

  <!-- ADD BOOK -->
  <div id="addBook" class="hidden">
    <h3>Add Your Book</h3>
    <input id="title" placeholder="Book title">
    <input id="price" type="number" placeholder="Price (Pi)">
    <input type="file" id="cover">
    <input type="file" id="pdf">
    <textarea id="desc" placeholder="Description"></textarea>
    <br>
    <label>
      <input type="checkbox" id="rights">
      I confirm I own the rights to this book
    </label><br>
    <button onclick="uploadBook()">Upload Book</button>
  </div>

  <h3>Books</h3>
  <div class="books" id="books"></div>
</div>

<script>
// ================= Firebase =================
firebase.initializeApp({
  apiKey: "AIzaSyAwYuJrfAYQ1kTp78ggUKFtQx192i2VsQM",
  authDomain: "spicy-97f54.firebaseapp.com",
  projectId: "spicy-97f54",
  storageBucket: "spicy-97f54.firebasestorage.app",
  messagingSenderId: "15493400338",
  appId: "1:15493400338:web:0551a61592e3c4642455cb"
});
const db = firebase.firestore();
const storage = firebase.storage();

// ================= Pi
